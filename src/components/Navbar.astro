---
import { Icon } from "astro-icon";
import ThemeToggler from "./ThemeToggler.svelte";
import Status from "./Status.astro";

const menus = [
  {
    name: "Home",
    icon: "ph:house-simple",
    href: "/",
  },
  {
    name: "Blog",
    icon: "ph:book-open",
    href: "/blog",
  },
  {
    name: "Snippets",
    icon: "ph:sparkle",
    href: "/snippets",
  },
  {
    name: "Bookmarks",
    icon: "ph:bookmark",
    href: "/bookmarks",
  },
  {
    name: "Uses",
    icon: "ph:monitor",
    href: "/uses",
  },
];

const settings = [
  {
    name: "Theme",
    icon: "ph:paint-brush-duotone",
    component: "listbox",
  },
  {
    name: "Sound",
    icon: "ph:music-note",
    component: "checkbox",
  },
  {
    name: "Layout",
    icon: "ph:layout-fill",
    component: "checkbox",
  },
];

const utilities = [
  {
    name: "RSS",
    icon: "ph:rss-simple",
  },
  {
    name: "Sitemap",
    icon: "mdi-light:sitemap",
  },
];
---

<div
  class="p-4 bg-primary-light rounded-md flex flex-col justify-between flex-shrink-0 flex-grow-0 w-64"
>
  <!-- Navbar -->
  <nav class="flex flex-col gap-4">
    <!-- Logo -->
    <h1
      class="text-5xl font-normal font-stylized text-center flex items-center justify-center gap-2"
    >
      <span class="text-accent">&#60</span>
      Ashfid
      <span class="text-accent"> &#62</span>
    </h1>

    <!-- Navigation Links -->
    <section>
      <h6 class="text-slate-500 font-heading">Menu</h6>
      <ul class="flex flex-col gap-[0.375rem]">
        {
          menus.map((menu) => (
            <li>
              <a
                id="swup"
                href={menu.href}
                class:list={[
                  "flex items-center gap-[0.375rem] p-[0.375rem] rounded-md spacing-x-2 transition-colors duration-300 group",
                  {
                    "bg-accent font-semibold":
                      Astro.url.pathname === menu.href + "/" ||
                      Astro.url.pathname === menu.href,
                    "hover:bg-accent-light": menu.href !== Astro.url.pathname,
                  },
                ]}
              >
                <Icon
                  name={menu.icon}
                  class:list={[
                    "w-6",
                    {
                      "animate-bounce":
                        Astro.url.pathname === menu.href + "/" ||
                        Astro.url.pathname === menu.href,
                    },
                  ]}
                />
                <span>{menu.name}</span>
              </a>
            </li>
          ))
        }
      </ul>
    </section>
    <!-- Settings -->
    <section>
      <h6 class="text-slate-500 font-heading">Settings</h6>
      <ul class="flex flex-col gap-[0.375rem]">
        {
          settings.map(({ icon, name, component }) => (
            <li class="flex justify-between items-center">
              {component == "listbox" && (
                <ThemeToggler client:load>
                  <Icon name={icon} slot="icon" class="w-6" />
                </ThemeToggler>
              )}
              {component == "checkbox" && (
                <div class="flex justify-between items-center p-[0.375rem] w-full">
                  <div class="flex gap-[0.375rem]">
                    <Icon name={icon} class="w-6" />
                    <span>{name}</span>
                  </div>

                  <input
                    type="checkbox"
                    class="checked:accent-accent w-4 cursor-pointer"
                  />
                </div>
              )}
            </li>
          ))
        }
      </ul>
    </section>
    <!-- Utilities -->
    <section>
      <h6 class="text-slate-500 font-heading">Utilities</h6>
      <ul class="flex flex-col gap-[0.375rem]">
        {
          utilities.map((utility) => (
            <li class="flex gap-[0.375rem] p-[0.375rem]">
              <Icon name={utility.icon} class="w-6" />
              {utility.name}
            </li>
          ))
        }
      </ul>
    </section>
  </nav>
  <!-- Footer -->
  <footer><Status /></footer>
</div>
