---
import Card from '@components/Cards/Card.astro'
import { Icon } from 'astro-icon'
import Main from '@layouts/Main.astro'
import { getCollection } from 'astro:content'
import SectionHeading from '@components/SectionHeading.astro'
import { Image } from 'astro:assets'
import ashfidLight from '@assets/images/ashfid-picture-light.jpg'

const skills = await getCollection('skills')

async function getSnippets() {
	const snippetEntries = await getCollection('snippets')
	return snippetEntries
}

const snippets = await getSnippets()
---

<Main title="Ashfid">
	<div class="space-y-6">
		<!-- Header content -->
		<section class="two-column-layout gap-2">
			<div class="space-y-3 rounded-md bg-primary-light px-5 py-5">
				<h1 class="font-heading text-2xl font-extrabold">
					Hello All <span
						class="animate-wave inline-block origin-[75%_75%] -translate-y-2 transform">ðŸ‘‹</span
					>
				</h1>
				<p>
					Well, this site is for sharing what I studied all these years related to software and web
					development. I really enjoy helping every developer to simplify their experience and not
					everything is about overengineering something.
				</p>
			</div>
			<div class="overflow-hidden rounded-md bg-red-600">
				<Image
					src={ashfidLight}
					alt="Ashfid for Light Mode"
					width={180}
					class="h-full object-cover"
				/>
			</div>
		</section>

		<!-- Featured Posts -->
		<!-- <section id="featured-posts" class="space-y-4">
			<h1 class="text-2xl font-semibold">
				<span class="text-accent text-4xl"
					>Featured</span
				>
				Posts
			</h1>
			<div class="grid grid-cols-1 lg:grid-cols-3 gap-4">
				<BlogCard type="react" />
				<BlogCard />
				<BlogCard type="unity" />
			</div>
			<span class="text-primary-lighter">Read All Posts (24) &#8594;</span
			>
		</section> -->

		<!-- Featured Posts (New!) -->
		<section id="latest-posts" class="space-y-4">
			<SectionHeading title="Latest Posts" />
			<div class="grid grid-cols-1 gap-1">
				<!-- <Card type="svelte" />
				<Card type="react" />
				<Card type="unity" /> -->
			</div>
			<span class="text-primary-lighter">Read All Posts (24) &#8594;</span>
		</section>

		<!-- Featured Snippets -->
		<section id="latest-snippets" class="space-y-4">
			<SectionHeading title="Featured Snippets" />
			<div class="grid grid-cols-1 gap-2 lg:gap-4">
				{
					snippets.map((snippet) => {
						const href = `/snippets/${snippet.slug}`
						return <Card snippet={snippet} />
					})
				}
			</div>
		</section>

		<!-- Things I know.  -->
		<section id="things-i-know" class="space-y-4">
			<SectionHeading title="Things I know" />
			{
				skills.map((skill) => {
					const rawName = skill.id
					const name = skill.id.charAt(0).toUpperCase() + rawName.slice(1)
					const cleanName = name.replace('-', ' ')

					return (
						<div class="flex items-center justify-between px-2">
							<h3 class="font-heading text-2xl text-teal-300">{cleanName}</h3>
							<div class="flex flex-wrap gap-2">
								{skill.data.entries.map((entry) => (
									<div class="group bg-primary-light p-2">
										<Icon
											name={entry.icon}
											class="h-12 w-12  opacity-50 transition-all duration-150 ease-linear group-hover:-translate-y-4 group-hover:text-accent group-hover:opacity-100"
										/>
									</div>
								))}
							</div>
						</div>
					)
				})
			}
		</section>
	</div>
</Main>

<style>
	.two-column-layout {
		display: grid;
		grid-template-columns: 1fr 180px;
	}
</style>
